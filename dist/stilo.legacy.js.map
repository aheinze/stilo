{"version":3,"file":"stilo.legacy.js","sources":["../js/api/utils.js","../js/api/dom.js","../js/api/stilo-element.js","../js/element/drop.js","../js/element/modal.js","../js/element/tab.js","../js/element/offcanvas.js","../js/api/stilo-directive.js","../js/api/directive.js","../js/directive/svg.js"],"sourcesContent":["\nexport function toArray(list) {\n    for (var a=[], l=list.length; l--; a[l]=list[l]); return a;\n}\n\n\n","import { toArray } from './utils';\n\nexport let domReady = new Promise(resolve => {\n    \n    if (document.readyState == 'complete' || document.readyState == 'interactive') {\n        requestAnimationFrame(() => resolve() );\n    } else {\n        document.addEventListener('DOMContentLoaded', () => requestAnimationFrame(() => resolve() ));\n    }\n});\n\nexport function observe(element, fn, config) {\n\n    config = Object.assign({\n        attributes: true,\n        childList: true,\n    }, config || {});\n\n    return (new MutationObserver(mutations => fn(mutations))).observe(element, config);\n}\n\nexport function attr(element, name, value) {\n    if (value !== undefined) {\n        element[value==='' ? 'removeAttribute':'setAttribute'](name, value);\n        return element;\n    }\n    return element.getAttribute(name);\n};\n\nexport function find(element, selector) {\n    return toArray(element.querySelectorAll(selector)).map(ele => $dom(ele));\n};\n\nexport function on(element, name, delegate, fn) {\n\n    if (!fn) {\n       element.addEventListener(name, arguments[2]);\n    } else {\n        element.addEventListener(name, function (e) {\n            \n            let target = e.target;\n            \n            while (target !== element) {\n\n                if (target.matches(delegate)){\n                    return fn.apply($dom(target), arguments);\n                }\n                target = target.parentNode;\n            }\n        });\n    }\n\n    return element;\n};\n\nexport function hasClass(element, name) {\n    return element.classList.contains(name);\n}\n\nexport function addClass(element, name) {\n    name.split(' ').forEach(cls => element.classList.add(cls)); \n    return element;\n}\n\nexport function removeClass(element, name) {\n    name.split(' ').forEach(cls => element.classList.remove(cls));\n    return element;\n}\n\nexport function css(element, prop, value){\n    \n    var args = arguments, props = {};\n\n    if (!args[1] && typeof(args[0]) == 'string') {\n        return window.getComputedStyle(element)[args[1]];\n    }\n\n    if (args[1]) {\n        props[args[0]] = args[1];\n    } else if (args.length == 2) {\n        props = args[0] || {};\n    }\n\n    for (let prop in props) {\n        element[prop] = props[prop];\n    }\n\n    return element;\n}\n\nexport function trigger(element, name, data) {\n    let evt = document.createEvent('HTMLEvents');\n    evt.data = data;\n    evt.initEvent(name, true, false);\n    element.dispatchEvent(evt);\n    return element;\n}\n\nexport function position(element) {\n    return { left: element.offsetLeft, top: element.offsetTop };\n}\n\nexport function offset(element) {\n    let rect = element.getBoundingClientRect(),\n        top  = rect.top + window.pageYOffset - document.documentElement.clientTop,\n        left = rect.left + window.pageXOffset - document.documentElement.clientLeft;\n\n    return { rect, top, left };\n}\n\nexport function offsetParent(element) {\n    return $dom(element.offsetParent);\n}\n\nexport function remove(element) {\n    element.parentNode.removeChild(element);\n}\n\nexport function html(element, content) {\n    if (content === undefined ) { \n        return element.innerHTML; \n    }\n    element.innerHTML = String(content.nodeType ? content.outerHTML : content);\n    return element;\n}\n\nexport function text(element, content) {\n    if (content === undefined) { \n        return element.textContent; \n    }\n    element.textContent = content;\n    return element;\n}\n\nexport function replaceWith(element, content) {\n\n    let ele;\n\n    if (typeof(content) === 'string') {\n        let tmp = document.createElement('div');\n        tmp.innerHTML = content;\n        ele = tmp.children[0];\n    } else {\n        ele = content;\n    }\n\n    element.parentNode.replaceChild(ele, element);\n    \n    return $dom(ele);\n}\n\nexport function children(element, selector) {\n    return toArray(element.children).filter(ele => ele.matches(selector)).map(ele => $dom(ele)); \n}\n\nexport function parent(element) {\n    return element.parentNode && $dom(element.parentNode); \n}\n\nexport function parents(element, selector) {\n    let list = [], _el = element;\n\n    while(_ele.parentNode) {\n\n        if (!selector || _ele.parentNode.matches(selector)) {\n            list.push($dom(_ele.parentNode));\n        }\n        _ele = _ele.parentNode;\n    }\n\n    return list;\n}\n\nexport function prev(element) {\n    return element.previousElementSibling && $dom(element.previousElementSibling);\n}\n\nexport function next(element) {\n    return element.nextElementSibling && $dom(element.nextElementSibling);\n}\n\n\nexport function $dom(element) {\n    \n    let fns = {\n        attr, find, parent, children, prev, next,\n        on, trigger, \n        hasClass, addClass, removeClass, \n        position, offset, offsetParent,\n        html, text, replaceWith, remove\n    };\n\n    Object.keys(fns).forEach(fn => {\n        element[`\\$${fn}`] = function() { return fns[fn].apply(element, [element, ...arguments]); }\n    });\n\n    return element;\n}","import { $dom, domReady } from './dom';\n\nexport class StiloElement extends HTMLElement {\n\n    constructor() {\n        super();\n        $dom(this);\n    }\n\n    connectedCallback() {\n        this.connect();\n        domReady.then(() => requestAnimationFrame(() => this.ready()));\n    }\n    disconnectedCallback() { this.disconnect(); }\n    attributeChangedCallback() { this.disconnect(); }\n\n    ready() {}\n    connect() {}\n    disconnect() {}\n}","import { StiloElement } from './../api/stilo-element';\n\nclass StiloDrop extends StiloElement {\n  \n    connect() {\n\n        console.log(this)\n    }\n}\n\ncustomElements.define('s-drop', StiloDrop);","import { StiloElement } from './../api/stilo-element';\n\nclass StiloModal extends StiloElement {\n  \n    connect() {\n\n        console.log(this)\n    }\n}\n\ncustomElements.define('s-modal', StiloModal);","import { StiloElement } from './../api/stilo-element';\n\n\nclass StiloTab extends StiloElement {\n\n\n    ready() {\n\n        var tab = this;\n\n        this.$on('click', 's-tabs a', function(e) {\n            \n            e.preventDefault();\n            \n            if (this.classList.contains('s-active')) {\n                return;\n            }\n\n            let index = Array.prototype.indexOf.call(this.parentNode.children, this);\n\n            tab.select(index);\n        });\n\n        this.select(0);\n    }\n\n    select(index) {\n\n        let activeClass = this.$attr('activeClass') || 's-active';\n        let tabs = this.$find('s-tabs > a');\n        let contents = this.$find('s-content > div');\n\n        tabs.forEach((tab, i) => tab.classList[ i === index ? 'add':'remove'](activeClass));\n        contents.forEach((content, i) => content.classList[ i === index ? 'add':'remove'](activeClass));\n\n        this.$trigger('s-tab-select', {index});\n    }\n}\n\ncustomElements.define('s-tab', StiloTab);","import { StiloElement } from './../api/stilo-element';\nimport { on } from './../api/dom';\n\n\non(document.documentElement, 'click', '[data-offcanvas-open]', function(e) {\n\n    e.preventDefault();\n\n    let offcanvas = document.querySelector(this.getAttribute('data-offcanvas-open') || this.href);\n\n    if (offcanvas && offcanvas.open) {\n        offcanvas.open();\n    }\n});\n\n\nclass StiloOffcanvas extends StiloElement {\n\n    ready() {\n\n        this.contentElement = this.children[0];\n\n        this.$on('click', e => {\n\n            if (e.target == this) {\n                this.close();\n            }\n        })\n        .$on('click', '[data-offcanvas-close]', e => this.close() )\n        .$on('transitionend', e => {\n\n            if (this.contentElement && e.target === this.contentElement && !this.isOpen) {\n                this.style.display = '';\n            }\n        });\n    }\n\n    open() {\n\n        this.isOpen = true;\n\n        if (!this.$hasClass('open')) {\n            this.$trigger('s-offcanvas-open');\n            this.style.display = 'block';\n            this.offsetWidth && this.$addClass('open');\n        }\n    }\n\n    close() {\n        this.isOpen = false;\n        this.$trigger('s-offcanvas-close');\n        this.$removeClass('open');\n    }\n}\n\ncustomElements.define('s-offcanvas', StiloOffcanvas);","import { $dom, domReady } from './dom';\n\nexport class StiloDirective {\n\n    constructor(element, option) {\n        this.element = $dom(element);\n        this.option = option;\n        domReady.then(() => requestAnimationFrame(() => this.ready()));\n    }\n\n    ready() {}\n}","import { $dom, domReady, observe } from './dom';\nimport { StiloDirective as Directive } from './stilo-directive';\n\nlet directives = {}\n\nexport function register(name, def) {\n    directives[name] = def;\n}\n\nexport function init(root) {\n    \n    domReady.then(() => {\n        \n        root = $dom(root || document.body);\n\n        let names = Object.keys(directives);\n        let selector = names.map(name => `[s-${name}]`).join(',');\n\n        if (!selector) {\n            return;\n        }\n\n        root.$find(selector).forEach(element => {\n            names.forEach(name => {\n                if (!element.hasAttribute(`s-${name}`)) {\n                    return\n                }\n                new directives[name](element, element.getAttribute(`s-${name}`));\n                element.removeAttribute(`s-${name}`);\n            });\n        });\n    });\n}\n\ndomReady.then(() => {\n\n    observe(document.body, mutations => {\n\n        mutations.forEach(({addedNodes, removedNodes, target}) => {\n\n            for (let i=0;i < addedNodes.length;i++) {\n\n                if (addedNodes[i].nodeType == Node.ELEMENT_NODE) {\n                    init(addedNodes[i]);\n                }\n            }\n        });\n    });\n\n    init()\n});\n\nexport let StiloDirective = Directive;","import { register, StiloDirective } from './../api/directive';\n\nlet cache = {};\n\nregister('svg', class StiloSvg extends StiloDirective {\n    \n    ready() {\n\n        let url = this.element.$attr('src') || this.option;\n\n        if (!url.trim()) {\n            return;\n        }\n\n        if (!cache[url]) {\n            cache[url] = fetch(url).then(response => response.text());\n        }\n\n        cache[url].then(content => {\n\n            let attrs = {\n                id:this.element.$attr('id'),\n                style:this.element.$attr('style'),\n                'class':this.element.$attr('class'),\n                width:this.element.$attr('width') || '',\n                height:this.element.$attr('height') || ''\n            };\n\n            this.element = this.element.$replaceWith(content);\n\n            Object.keys(attrs).forEach(attr => attrs[attr] && this.element.$attr(attr, attrs[attr]));\n        });\n    }\n});\n"],"names":["toArray","list","a","l","length","domReady","Promise","document","readyState","resolve","addEventListener","requestAnimationFrame","observe","element","fn","config","Object","assign","MutationObserver","mutations","attr","name","value","undefined","getAttribute","find","selector","querySelectorAll","map","$dom","ele","on","delegate","arguments","e","target","matches","apply","parentNode","hasClass","classList","contains","addClass","split","forEach","add","cls","removeClass","remove","trigger","data","evt","createEvent","initEvent","dispatchEvent","position","left","offsetLeft","top","offsetTop","offset","rect","getBoundingClientRect","window","pageYOffset","documentElement","clientTop","pageXOffset","clientLeft","offsetParent","removeChild","html","content","innerHTML","String","nodeType","outerHTML","text","textContent","replaceWith","tmp","createElement","children","replaceChild","filter","parent","prev","previousElementSibling","next","nextElementSibling","fns","keys","StiloElement","connect","then","ready","disconnect","HTMLElement","StiloDrop","log","customElements","define","StiloModal","StiloTab","tab","$on","preventDefault","index","Array","prototype","indexOf","call","select","activeClass","$attr","tabs","$find","contents","i","$trigger","offcanvas","querySelector","href","open","StiloOffcanvas","contentElement","close","isOpen","style","display","$hasClass","offsetWidth","$addClass","$removeClass","StiloDirective","option","directives","register","def","init","root","body","names","join","hasAttribute","removeAttribute","addedNodes","removedNodes","Node","ELEMENT_NODE","Directive","cache","url","trim","fetch","response","attrs","$replaceWith"],"mappings":"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"}